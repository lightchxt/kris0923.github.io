---
title: "【APUE】守护进程"
date: 2022-06-08T00:14:23+08:00
draft: true
categories: ["读书笔记"]
tags: ["APUE", "Linux"]
---

## 定义
守护进程（daemon）是生存期长的一种进程。通常在系统引导装入时启动
## 举例
- kswapd 守护进程称为内存换页守护进程，支持虚拟内存在子系统在经过一段时间后讲脏页面写回磁盘来回收这些页面
- flush 守护进程在可用内存达到设置的最小阈值时讲脏页面冲洗至磁盘；也定期的将脏页面数据冲洗回磁盘来减少在系统出现故障时发生数据丢失。多个冲洗守护进程可以同时存在，每个写回设备都有一个冲洗守护进程
- sync_supers 守护进程定期的将文件系统元数据冲洗至磁盘
- jbd 守护进程帮助 实现了ext4文件系统中的日志功能

> 用户层守护进程的父进程时init进程
## 编程规则
1. 调用umask 将文件创建模式屏蔽字设置为一个已知值（通常是0）
2. 调用fork，然后使父进程 exit
3. 调用setsid创建一个新会话
4. 将工作目录改为根目录
5. 关闭不再需要的文件描述符
6. 某些守护进程打开/dev/null使其具有文件描述符0、1、2，这样任何一个试图读标准输入，写标准输出和错误输出的库例程都不会产生任何效果